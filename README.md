# DebutLab - Тренажёр шахматных дебютов

DebutLab - это веб-приложение для изучения шахматных дебютов с использованием современных технологий и принципов интервального повторения.

## Особенности

- **Интерактивная шахматная доска** с поддержкой drag-and-drop и tap-tap
- **Пошаговое изучение** дебютов с подсказками
- **Система интервального повторения (SRS)** для эффективного запоминания
- **Отслеживание прогресса** с сохранением в LocalStorage
- **Адаптивный дизайн** для всех устройств

## Технологии

- **Frontend**: React 18 + TypeScript
- **Сборка**: Vite
- **Роутинг**: React Router
- **Шахматная логика**: chess.js
- **Шахматная доска**: chessground
- **Состояние**: Zustand
- **Тестирование**: Vitest + Testing Library
- **Стили**: CSS3 с адаптивным дизайном

## Установка и запуск

### Требования
- Node.js ≥ 18
- npm или yarn

### Установка зависимостей
```bash
npm install
```

### Запуск в режиме разработки
```bash
npm run dev
```

### Сборка для продакшена
```bash
npm run build
```

### Предварительный просмотр сборки
```bash
npm run preview
```

### Проверка типов
```bash
npm run typecheck
```

### Запуск тестов
```bash
npm test
```

### Линтинг
```bash
npm run lint
```

## Структура проекта

```
src/
├── app/                 # Роутинг и макет
├── components/          # React компоненты
├── content/            # Типы и загрузчики данных
├── pages/              # Страницы приложения
├── study/              # Логика изучения и SRS
└── styles/             # CSS стили

public/
└── content/            # JSON файлы с данными дебютов
    ├── catalog.json    # Каталог всех дебютов
    └── demo/           # Демо-дебюты для тестирования

tests/                  # Тесты
```

## Схема данных

### Каталог дебютов (catalog.json)
```json
{
  "schema": "debutlab.catalog.v1",
  "updatedAt": "2025-01-02T00:00:00Z",
  "debuts": [
    {
      "id": "sicilian",
      "name": "Сицилианская защита",
      "side": "black",
      "tags": ["black", "popular", "vs-e4"],
      "file": "demo/sicilian.v1.json",
      "branches": 2,
      "approxSizeKB": 2
    }
  ]
}
```

### Дебют (debut.v1.json)
```json
{
  "schema": "debutlab.debut.v1",
  "id": "sicilian",
  "name": "Сицилианская защита",
  "side": "black",
  "tags": ["black", "popular", "vs-e4"],
  "branches": [
    {
      "id": "sicilian-0001",
      "type": "main_line",
      "name": "1.e4 c5 2.Nf3 d6 3.d4 cxd4 4.Nxd4 Nf6",
      "startFen": "startpos",
      "ucis": ["e2e4", "c7c5", "g1f3", "d7d6", "d2d4", "c5d4", "f3d4", "g8f6"],
      "minPly": 8
    }
  ]
}
```

## Принципы работы

### Режимы изучения
1. **GUIDED** - режим обучения с подсказками (зелёные стрелки)
2. **TEST** - режим проверки знаний без подсказок

### Система SRS
- **0 ошибок** → повтор через 3, 7, 14, 30 дней
- **1-2 ошибки** → повтор через 10 минут
- **3+ ошибок** → повтор через 1 час

### Приоритеты веток
1. SRS-due (срок повторения настал)
2. Новые ветки (сначала main_line, затем alternative)

## Демо-контент

Проект включает 3 демо-дебюта:
- **Сицилианская защита** (чёрные)
- **Испанская партия** (белые)
- **Ферзевый гамбит** (белые)

## Лицензия

Проект создан для образовательных целей.

## Разработка

### Добавление нового дебюта
1. Создайте JSON файл в `public/content/`
2. Добавьте запись в `catalog.json`
3. Убедитесь в корректности схемы данных

### Архитектура
- **ChessBoard** - обёртка над chessground с контролируемым API
- **StudyEngine** - машина состояний для логики изучения
- **ProgressManager** - управление прогрессом и SRS
- **ContentLoader** - загрузка и валидация данных

### Тестирование
```bash
# Запуск всех тестов
npm test

# Запуск тестов в watch режиме
npm test -- --watch

# Покрытие кода
npm test -- --coverage
```

## Поддержка

Для вопросов и предложений создавайте issues в репозитории проекта.
